<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <!-- <meta name="theme-color" content="#FB6E3B"> -->
    <title>Editar Cardápio Digital</title>
    <link rel="shortcut icon" href="favico.png" type="image/png">
    <link rel="stylesheet" href="assets/css/app.css">  
    <link rel="stylesheet" href="assets/css/validation.css">  
    <link rel="stylesheet" href="assets/css/inputs.css">  
    <link rel="stylesheet" href="assets/css/cart.css">  
    <link rel="stylesheet" href="assets/components/user/user.css">  
    <link rel="stylesheet" href="assets/components/menu/menu.css">  
    <link rel="stylesheet" href="assets/components/modal/modal.css">  
    <link rel="stylesheet" href="assets/components/search/search.css">  
    <link rel="stylesheet" href="assets/components/categorias/categorias.css">  
    <link rel="stylesheet" href="assets/components/product/product.css">  
    <link rel="stylesheet" href="assets/components/mediasocial/mediasocial.css">  
    <link rel="stylesheet" href="assets/components/swiper/swiper.css">  
    <link rel="stylesheet" href="assets/components/banners/banners.css">  
    <link rel="stylesheet" href="assets/components/checkout/checkout.css">   
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100;200;300;400;700;900&display=swap" rel="stylesheet">
</head>
<body>
  
  <!-- <button id="deleteOrder">Delete Order</button>  -->
  <div id="list"></div>
   
  <div class="user" id="user"> 
  </div>
  <div class="cart" id="cart">  </div>
  <div class="checkout" id="checkout">
    <div class="controls">  
      <button onclick="closeCheckout()"> <i class="fa-solid fa-chevron-left"></i></button>
      <button onclick="closeCheckout()"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="content">
      <h2>Finalizar Pedido </h2>
    </div>
    <form id="checkoutform" class="checkoutform" >
      <div>
        <label style="
          width: 100%;
          height: auto;
          ">
        Forma de retirada:
        </label> 
        <div class="mylabel select">
          <label>
          <img src="assets/images/inputs/archive.png" style="margin-top: 16px;">
          </label>
          <select onchange="formaRetirada()" id="selectCheckout">
            <option value="1">Selecione a forma de retirada</option>
            <option value="balcao">Viagem</option>
            <option value="mesa">Mesa</option>
          </select>
        </div>
        <div id="setMesa" class="mylabel"  style="display:none">
          <label style="height:48px;"> 
          <img src="assets/images/inputs/mesa.png" style="margin-top: 16px;">  
          </label>
          <input id="inputMesa"  type="number" placeholder="Digite o numero da mesa">
        </div>
        <div id="whatsappId"  style="display: none; ">
          <!-- <span>Receba notificação via whatsapp </span> -->
          <div id="setPhone" class="mylabel" >
            <label style="height:48px;">  
            <img src="assets/images/inputs/whats.png" style="margin-top: 16px;">  
            </label>
            <input id="inputMesa"  type="number" placeholder="Whatsapp para notificação">
          </div>
        </div>
      </div>
      <div style="position: relative;">
        <label> 
        Observações do Pedido:
        </label>
        <textarea id="areaObs" placeholder="Digite observações do seu pedido"></textarea>
      </div>
      <div id="mgg"></div>
      <div class="total" id="totalfinesh"> 
        <button type="submit" id="submitCheck">ENVIAR MEU PEDIDO </button>
      </div>
  </div>
  </form>
  </div>
  <div class="menu">
    <ul>
      <!-- <button >+</button>  -->

      <form class="updateMenu" >
        <button  > 
          <i class="fa-solid fa-paper-plane"></i>
          <span>Salvar</span>
        </button> 
      </form>

      <!-- <button id="cartPreview"><img src="assets/images/shopping-cart.png" alt="" srcset=""></button> -->
      <!-- <button><img src="assets/images/menu.png" alt="" srcset=""></button> -->
    </ul>
  </div>
  
  <div class="search">
    <h2 >Adicione, altere ou remova Produtos</h2>
    <form>
      <!--           
        <div class="mylabel">
          <label>  <img src="assets/images/inputs/user.png" style="width: 16px;">
          </label>
          <input id="userName" style="margin-bottom: 5px !important;" placeholder="Digite seu nome" type="text" required> 
        </div> -->
      <div class="mylabel">
        <label style="
          top: 0px;
          height: 46px;
          ">  
        <img src="assets/images/search.png" alt="">
        </label>
        <input  onclick="getSearch(event)" type="text" placeholder="Buscar itens...">
        <!-- <i class="fa-solid fa-arrow-right"></i> -->
      </div>
      <div id="contentSearch" class="contentSearch">
        <!-- CONTROLES -->
        <div class="controls">
          <button onclick="getSearch(event)">
            <svg class="svg-inline--fa fa-chevron-left" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" data-fa-i2svg="">
              <path fill="currentColor" d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 278.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"></path>
            </svg>
            <!-- <i class="fa-solid fa-chevron-left"></i> Font Awesome fontawesome.com -->
          </button>
          <button onclick="getSearch(event)">
            <svg class="svg-inline--fa fa-xmark" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg="">
              <path fill="currentColor" d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"></path>
            </svg>
            <!-- <i class="fa-solid fa-xmark"></i> Font Awesome fontawesome.com -->
          </button>
        </div>
        <div class="mylabel" style="position: inherit;width: 100%;margin-top: 50px;margin-bottom: 10px;margin-left: 10px;"> 
          <label>
          <img src="assets/images/search.png" alt=""> 
          </label>
          <input id="serchInput" type="text" placeholder="Buscar itens..."> 
        </div>
      </div>
    </form>
    <div id="searchResult"></div>
  </div>
  <div style="display:none;" class="banners">
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="assets/images/bannercamarao.png" alt="" >
        </div>
        <div class="swiper-slide">
          <img src="assets/images/bannerdrinks.png" alt="" >
        </div>
        <div class="swiper-slide">
          <img src="assets/images/bannercerveja.png" alt="" >
        </div>
        <div class="swiper-slide">
          <img src="assets/images/bannertapioca.png" alt="" >
        </div>
        <div class="swiper-slide">
          <img src="assets/images/bannerpanqueca.png" alt="" >
        </div>''
      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
  <div id="categories" class="categories"> </div>

  <!-- MODAL -->
  <div class="modal-container">
    <div class="modal">
      <div class="controls"> 
        <button onclick="modalToggle()"><svg class="svg-inline--fa fa-chevron-left" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" data-fa-i2svg=""><path fill="currentColor" d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 278.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"></path></svg><!-- <i class="fa-solid fa-chevron-left"></i> Font Awesome fontawesome.com --></button>
        <button onclick="modalToggle()"><svg class="svg-inline--fa fa-xmark" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"></path></svg><!-- <i class="fa-solid fa-xmark"></i> Font Awesome fontawesome.com --></button>  
    </div>

      <div class="content-text">
        <h2>Editar produto.</h2>
      </div>

      <form>
        
        <label style="  width: 100%; height: auto; ">
          Nome do Produto:
        </label>

        <div class="mylabel">
          <label style="height:48px;">   
           </label>
          <input id="m-nome" type="text" required />
        </div> 
 
    
        <label for="m-price">Preço</label>
         
        <div class="mylabel">
          <label style="height:48px;">    <!-- <img src="assets/images/inputs/whats.png" style="margin-top: 16px;">   -->  </label>
           <input id="m-price" type="number" required />



        </div>  

        <button id="btnSalvar">ok</button>
      </form>
    </div>
  </div>

  <div id="msgLoad" class="msgLoad">
    <img src="assets/images/logo.png">
    <h3>Aguarde </h3>
    <p>Estamos atizando seu cardápio!</p>
    <img src="assets/images/loading.gif">
    <!-- <button>Cancelar</button>  -->
  </div>
</div>
</body>
    
  
    </html>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js" integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> 
 <script src="assets/components/api/apidb.js"></script>
 <script src="assets/js/all.js"></script>
 <script src="assets/components/relogio/relogio.js"></script>
 <script src="assets/components/checkout/animatedCheckOut.js"></script>
 <script src="assets/components/checkout/checkout.js"></script>
 <script src="assets/components/categorias/categorias.js"></script>
 
 <script src="assets/components/api/api-categorias.js"></script>
 <script src="assets/components/orders/ordermore.js"></script>

 <script src="assets/components/search/search.js"></script>
 <script src="assets/js/validation.js"></script>
 <script src="assets/js/cart.js"></script>
 <script src="assets/components/swiper/swiper.js"></script>
 <script src="assets/js/app.js"></script>
 <script src="assets/components/modal/modal.js"></script>


 <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
 <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script>
   var swiper = new Swiper(".mySwiper", {
        slidesPerView: 3,
        spaceBetween: 30,
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },
      });
</script>
 <script type="module">

  const firebaseConfig = {
      apiKey: "AIzaSyDY6JXe0kBoMU2BlrkafuTm6gq1H5LUohY",
      authDomain: "harmonydigi-24166.firebaseapp.com",
      projectId: "harmonydigi-24166",
      storageBucket: "harmonydigi-24166.appspot.com",
      messagingSenderId: "970946599618",
      appId: "1:970946599618:web:e13bd162b24dc46718795b"
  };  

 // Initialize Firebase
 firebase.initializeApp(firebaseConfig); 

 // Initialize Cloud Firestore and get a reference to the service
 const db = firebase.firestore();


 let btnSubmit=document.getElementById('submitCheck')
 let list = document.getElementById("notifications") 
 let form = document.querySelector(".checkoutform") 
 let formupdateMenu = document.querySelector(".updateMenu") 
 let horaAtual=relogio()
 let horaReplace=horaAtual.replace(/[^0-9]/g, '')
 let databaseDeliveryArr=[]
 let databaseMesas=[] 
 let entregaPed=false



 //UPDATE CARDAPIO
  


formupdateMenu.addEventListener('submit', function(e){
  e.preventDefault()  
   
  console.log('atualizando..',data)
  console.log(msgLoadContainer)
   msgLoadContainer.style.cssText='display:flex;'

  // db.collection('cardapio').doc('cardapioatual').set( {dataProd:data})
  db.collection('cardapio').doc('cardapioatual').set( {dataProd:[
        {
            "image2": "assets/images/cat2.png",
            "name": "Para Beber",
            "image": "assets/images/cat1.png",
            "key": "Comer",
            "itens": [
                {
                    "id": "1SC",
                    "products": [
                        {
                            "name": "Cerveja Heineken Long Neck ",
                            "quantidade": 0,
                            "img": "assets/images/produtos/cervejaheilong.png",
                            "id": "477",
                            "price": "14"
                        },
                        {
                            "price": 9,
                            "img": "assets/images/produtos/cervejacoronalong.png",
                            "id": "398",
                            "quantidade": 0,
                            "name": "Cerveja Corona Long Neck"
                        },
                        {
                            "quantidade": 0,
                            "id": "218",
                            "img": "assets/images/produtos/cervejastellalong.png",
                            "price": 8,
                            "name": "Cerveja Stella Long Neck"
                        },
                        {
                            "img": "assets/images/produtos/cervejabudlong.png",
                            "id": "368",
                            "name": "Cerveja Budweiser Long Neck",
                            "quantidade": 0,
                            "price": 7.5
                        },
                        {
                            "name": "Skol Beets Long Neck",
                            "img": "assets/images/produtos/skolbeetslong.png",
                            "id": "378",
                            "price": 12,
                            "quantidade": 0
                        },
                        {
                            "quantidade": 0,
                            "id": "110",
                            "name": "Beats GT Long Neck",
                            "price": 12.5,
                            "img": "assets/images/produtos/gtbeets.png"
                        },
                        {
                            "id": "967",
                            "quantidade": 0,
                            "img": "assets/images/produtos/cervejaitaipavalong.png",
                            "price": 8,
                            "name": "Cerveja Itaipava Malzbier Long Neck"
                        },
                        {
                            "id": "96",
                            "name": "Cerveja Black Princess Long Neck",
                            "price": 15,
                            "quantidade": 0,
                            "img": "assets/images/produtos/cervejablackprincess.png"
                        },
                        {
                            "img": "assets/images/produtos/cervejaheilata.png",
                            "name": "Cerveja Heineken Lata",
                            "id": "467",
                            "price": 6.5,
                            "quantidade": 0
                        },
                        {
                            "img": "assets/images/produtos/cervejaitaipavalata.png",
                            "quantidade": 0,
                            "price": 4,
                            "id": "879",
                            "name": "Cerveja Itaipava Lata"
                        },
                        {
                            "quantidade": 0,
                            "id": "991",
                            "price": 4.5,
                            "name": "Cerveja Brahma lata",
                            "img": "assets/images/produtos/cervejabrahmalata.png"
                        },
                        {
                            "name": "Cerveja Skol lata",
                            "quantidade": 0,
                            "id": "343",
                            "img": "assets/images/produtos/cervejaskollata.png",
                            "price": 4.5
                        },
                        {
                            "price": 5,
                            "id": "499",
                            "img": "assets/images/produtos/cervejaamstellata.png",
                            "quantidade": 0,
                            "name": "Cerveja Amstel Lata"
                        },
                        {
                            "name": "Cerveja Spaten Lata",
                            "id": "657",
                            "img": "assets/images/produtos/cervejaspatenlata.png",
                            "price": 6,
                            "quantidade": 0
                        },
                        {
                            "name": "Cerveja Petra Lata",
                            "price": 5,
                            "id": "27",
                            "quantidade": 0,
                            "img": "assets/images/produtos/cervejapetralata.png"
                        },
                        {
                            "img": "assets/images/produtos/cervejaimperiolata.png",
                            "price": 4.5,
                            "quantidade": 0,
                            "name": "Cerveja Império Lata",
                            "id": "173"
                        },
                        {
                            "price": 5,
                            "name": "Cerveja Brahma Duplo Malte Lata",
                            "img": "assets/images/produtos/cervejabrahmaduplo.png",
                            "quantidade": 0,
                            "id": "676"
                        },
                        {
                            "id": "736",
                            "price": 6.3,
                            "quantidade": 0,
                            "img": "assets/images/produtos/cervejaeisebahnlata.png",
                            "name": "Cerveja Eisebahn lata"
                        },
                        {
                            "id": "380",
                            "quantidade": 0,
                            "name": "Cerveja Skol Puro Malte lata",
                            "price": 5,
                            "img": "assets/images/produtos/cervejaskolpurolata.png"
                        },
                        {
                            "price": 6.5,
                            "id": "1",
                            "name": "Cerveja Original lata",
                            "img": "assets/images/produtos/cervejaoriginallata.png",
                            "quantidade": 0
                        },
                        {
                            "img": "assets/images/produtos/cervejabudlata.png",
                            "quantidade": 0,
                            "id": "544",
                            "price": 5,
                            "name": "Budweiser Lata"
                        },
                        {
                            "name": "Itaipava 0%",
                            "price": 5,
                            "quantidade": 0,
                            "img": "assets/images/produtos/cervejaitaipava0.png",
                            "id": "899"
                        },
                        {
                            "id": "765",
                            "quantidade": 0,
                            "name": "Brahma 0%",
                            "price": 6,
                            "img": "assets/images/produtos/cervejabrahma0.png"
                        }
                    ],
                    "name": "Breja"
                },
                {
                    "name": "Whisky",
                    "id": "695",
                    "products": [
                        {
                            "id": "592",
                            "img": "assets/images/produtos/whiskycavalobranco.png",
                            "name": "Whisky Cavalo Branco",
                            "price": 95,
                            "quantidade": 0
                        },
                        {
                            "name": "Whisky Red Label 1L",
                            "quantidade": 0,
                            "img": "assets/images/produtos/whiskredlabel.png",
                            "price": 125,
                            "id": "468"
                        },
                        {
                            "id": "614",
                            "img": "assets/images/produtos/whiskblacklabel.png",
                            "quantidade": 0,
                            "price": 190,
                            "name": "Whisky Black Label"
                        },
                        {
                            "price": 160,
                            "img": "assets/images/produtos/whiskjackdaniels.png",
                            "name": "Whisky Jack Daniels",
                            "quantidade": 0,
                            "id": "177"
                        },
                        {
                            "price": 120,
                            "img": "assets/images/produtos/Whiskyballantines.png",
                            "name": "Whisky Ballantines",
                            "id": "711",
                            "quantidade": 0
                        },
                        {
                            "quantidade": 0,
                            "name": "Whisky Buchanans",
                            "id": "273",
                            "img": "assets/images/produtos/whiskybuchanans.png",
                            "price": 200
                        },
                        {
                            "quantidade": 0,
                            "img": "assets/images/produtos/whiskygoldlabel.png",
                            "id": "266",
                            "price": 250,
                            "name": "Whisky Gold Label"
                        },
                        {
                            "price": 50,
                            "id": "868",
                            "quantidade": 0,
                            "img": "assets/images/produtos/whiskpassport.png",
                            "name": "Whisky Passport"
                        },
                        {
                            "img": "assets/images/produtos/whiskypassportmel.png",
                            "id": "73",
                            "name": "Whisky Passport Mel",
                            "quantidade": 0,
                            "price": 52
                        },
                        {
                            "id": "629",
                            "name": "Whisky Chivas Regal",
                            "price": 170,
                            "img": "assets/images/produtos/whiskychivasregal.png",
                            "quantidade": 0
                        },
                        {
                            "quantidade": 0,
                            "name": "Whisky Famuous One",
                            "img": "assets/images/produtos/whiskfamuousonel.png",
                            "id": "68",
                            "price": 25
                        },
                        {
                            "id": "804",
                            "quantidade": 0,
                            "price": 20,
                            "img": "assets/images/produtos/whiskoldstar.png",
                            "name": "Whisky Old Star"
                        },
                        {
                            "quantidade": 0,
                            "price": 35,
                            "id": "437",
                            "img": "assets/images/produtos/whiskblackstone.png",
                            "name": "Whisky Black Stone"
                        },
                        {
                            "quantidade": 0,
                            "price": 25,
                            "img": "assets/images/produtos/wiskgold.png",
                            "id": "656",
                            "name": "Whisky Master Gold"
                        }
                    ]
                },
                {
                    "name": "Copão de Whisky",
                    "id": "134",
                    "products": [
                        {
                            "price": 10,
                            "quantidade": 0,
                            "id": "366",
                            "name": "Adicional + Red Bull",
                            "img": "assets/images/produtos/energeticoredbull.png"
                        },
                        {
                            "price": 20,
                            "id": "959",
                            "name": "Copão Whisky Cavalo Branco",
                            "img": "assets/images/produtos/copocavalobranco.png",
                            "quantidade": 0
                        },
                        {
                            "quantidade": 0,
                            "id": "114",
                            "price": 25,
                            "name": "Copão Whisky Red Label 1L",
                            "img": "assets/images/produtos/coporedlabel.png"
                        },
                        {
                            "img": "assets/images/produtos/copojackdaniels.png",
                            "name": "Copão Whisky Jack Daniels",
                            "quantidade": 0,
                            "price": 30,
                            "id": "810"
                        },
                        {
                            "name": "Copão Whisky Passport",
                            "img": "assets/images/produtos/copopassport.png",
                            "quantidade": 0,
                            "id": "37",
                            "price": 15
                        },
                        {
                            "quantidade": 0,
                            "name": "Copão Whisky Passport Mel",
                            "img": "assets/images/produtos/copopassportmel.png",
                            "id": "572",
                            "price": 20
                        }
                    ]
                },
                {
                    "id": "3",
                    "name": "Fardos",
                    "products": [
                        {
                            "quantidade": 0,
                            "price": 66,
                            "img": "assets/images/produtos/fardoheineken.png",
                            "name": "Fardo Cerveja Heineken",
                            "id": "153"
                        },
                        {
                            "price": 42,
                            "name": "Fardo Cerveja Itaipava",
                            "quantidade": 0,
                            "img": "assets/images/produtos/fardoitaipava.png",
                            "id": "789"
                        },
                        {
                            "price": 48,
                            "quantidade": 0,
                            "name": "Fardo Cerveja Brahma",
                            "id": "759",
                            "img": "assets/images/produtos/fardobrahma.png"
                        },
                        {
                            "price": 48,
                            "id": "88",
                            "quantidade": 0,
                            "img": "assets/images/produtos/fardoskol.png",
                            "name": "Fardo Cerveja Skol"
                        },
                        {
                            "price": 49,
                            "name": "Fardo Cerveja Amstel",
                            "quantidade": 0,
                            "id": "869",
                            "img": "assets/images/produtos/fardoamstel.png"
                        },
                        {
                            "quantidade": 0,
                            "name": "Fardo Spaten",
                            "img": "assets/images/produtos/fardospaten.png",
                            "id": "6",
                            "price": 60
                        },
                        {
                            "quantidade": 0,
                            "id": "17",
                            "price": 49,
                            "name": "Fardo Cerveja Petra",
                            "img": "assets/images/produtos/fardopetra.png"
                        },
                        {
                            "price": 45.6,
                            "name": "Fardo Cerveja Império",
                            "img": "assets/images/produtos/fardoimperio.png",
                            "id": "613",
                            "quantidade": 0
                        },
                        {
                            "id": "533",
                            "quantidade": 0,
                            "img": "assets/images/produtos/fardobrahmaduplo.png",
                            "name": "Fardo Cerveja Brahma Duplo Malte",
                            "price": 48
                        },
                        {
                            "img": "assets/images/produtos/fardiei.png",
                            "name": "Fardo Cerveja Eisenbahn",
                            "id": "269",
                            "quantidade": 0,
                            "price": 64
                        },
                        {
                            "id": "378",
                            "price": 48,
                            "name": "Fardo Cerveja Skol Puro Malte",
                            "img": "assets/images/produtos/fardoskolpuromalte.png",
                            "quantidade": 0
                        },
                        {
                            "name": "Fardo Cerveja Original",
                            "img": "assets/images/produtos/fardooriginal.png",
                            "price": 64,
                            "id": "587",
                            "quantidade": 0
                        }
                    ]
                },
                {
                    "name": "Vodkas",
                    "products": [
                        {
                            "quantidade": 0,
                            "img": "assets/images/produtos/smirnoffice.png",
                            "id": "120",
                            "price": 13,
                            "name": "Vodka Smirnoff Ice Long Neck"
                        },
                        {
                            "quantidade": 0,
                            "id": "518",
                            "price": 9.5,
                            "name": "Vodka Smirnorff Lata",
                            "img": "assets/images/produtos/smirnofficelata.png"
                        },
                        {
                            "name": "Vodka Smirnoff 1L",
                            "id": "925",
                            "quantidade": 0,
                            "price": 49,
                            "img": "assets/images/produtos/vodkasmirnoff1l.png"
                        },
                        {
                            "price": 7.5,
                            "img": "assets/images/produtos/ousadia.png",
                            "quantidade": 0,
                            "name": "Vodka Ousadia",
                            "id": "43"
                        },
                        {
                            "price": 58,
                            "name": "Vodka Smirnorff Sabor",
                            "id": "602",
                            "quantidade": 0,
                            "img": "assets/images/produtos/smirnoffsabor.png"
                        },
                        {
                            "price": 18,
                            "name": "Vodka Askov",
                            "quantidade": 0,
                            "id": "943",
                            "img": "assets/images/produtos/askov.png"
                        },
                        {
                            "img": "assets/images/produtos/vodkaaskovsabor.png",
                            "name": "Vodka Askov Sabor 1L",
                            "price": 18,
                            "id": "874",
                            "quantidade": 0
                        }
                    ],
                    "id": "656"
                },
                {
                    "name": "Gin",
                    "products": [
                        {
                            "quantidade": 0,
                            "img": "assets/images/produtos/gin.png",
                            "price": 199,
                            "name": "Gin Tanqueray",
                            "id": "783"
                        },
                        {
                            "price": 37,
                            "quantidade": 0,
                            "id": "998",
                            "img": "assets/images/produtos/ginrose.png",
                            "name": "Gin Rose"
                        },
                        {
                            "img": "assets/images/produtos/ginflowers.png",
                            "quantidade": 0,
                            "id": "878",
                            "price": 9.5,
                            "name": "Gin Flowers"
                        }
                    ],
                    "id": "385"
                },
                {
                    "id": "910",
                    "products": [
                        {
                            "price": 17,
                            "quantidade": 0,
                            "name": "51 Pinga 1L",
                            "id": "79",
                            "img": "assets/images/produtos/51.png"
                        },
                        {
                            "price": 7.5,
                            "img": "assets/images/produtos/pinga51long.png",
                            "name": "51 Ice Long Neck",
                            "quantidade": 0,
                            "id": "578"
                        },
                        {
                            "price": 18,
                            "quantidade": 0,
                            "id": "760",
                            "name": "Pitu Pinga",
                            "img": "assets/images/produtos/52.png"
                        },
                        {
                            "price": 18,
                            "quantidade": 0,
                            "id": "294",
                            "img": "assets/images/produtos/53.png",
                            "name": "Velho Barreiro"
                        },
                        {
                            "name": "Corote",
                            "id": "993",
                            "img": "assets/images/produtos/54.png",
                            "quantidade": 0,
                            "price": 5.5
                        },
                        {
                            "id": "433",
                            "quantidade": 0,
                            "price": 18,
                            "name": "Dreher",
                            "img": "assets/images/produtos/55.png"
                        },
                        {
                            "quantidade": 0,
                            "name": "Contini",
                            "img": "assets/images/produtos/pingacontini.png",
                            "id": "203",
                            "price": 35
                        },
                        {
                            "img": "assets/images/produtos/pingajurupinga.png",
                            "price": 35,
                            "name": "Jurupinga",
                            "quantidade": 0,
                            "id": "609"
                        },
                        {
                            "name": "São Francisco",
                            "id": "378",
                            "quantidade": 0,
                            "img": "assets/images/produtos/pingasaofrancisco.png",
                            "price": 28
                        },
                        {
                            "name": "Luizence",
                            "quantidade": 0,
                            "id": "615",
                            "img": "assets/images/produtos/pingaluizence.png",
                            "price": 32
                        }
                    ],
                    "name": "Pinga"
                },
                {
                    "products": [
                        {
                            "name": "Copão de Smirnoff",
                            "img": "assets/images/produtos/coposmirnoff.png",
                            "quantidade": 0,
                            "id": "30",
                            "price": 15
                        },
                        {
                            "img": "assets/images/produtos/copoaskovsabor.png",
                            "name": "Copão de Askov de Sabor",
                            "price": 10,
                            "quantidade": 0,
                            "id": "253"
                        }
                    ],
                    "name": "Copão de Vodka",
                    "id": "589"
                },
                {
                    "id": "933",
                    "name": "Doses",
                    "products": [
                        {
                            "id": "839",
                            "quantidade": 0,
                            "price": "13",
                            "img": "assets/images/produtos/dosecontini.png",
                            "name": "Dose Contine"
                        },
                        {
                            "id": "351",
                            "img": "assets/images/produtos/dosedreher.png",
                            "price": 4,
                            "quantidade": 0,
                            "name": "Dose Dreher"
                        },
                        {
                            "quantidade": 0,
                            "id": "9",
                            "name": "Dose Pitu",
                            "img": "assets/images/produtos/dosepitu.png",
                            "price": 4
                        },
                        {
                            "img": "assets/images/produtos/dose51.png",
                            "quantidade": 0,
                            "id": "304",
                            "price": 3,
                            "name": "Dose 51"
                        },
                        {
                            "img": "assets/images/produtos/dosejurupinga.png",
                            "quantidade": 0,
                            "id": "619",
                            "price": 7,
                            "name": "Dose Jurupinga"
                        },
                        {
                            "price": 5,
                            "name": "Dose São Francisco",
                            "id": "653",
                            "img": "assets/images/produtos/dosesaofrancisco.png",
                            "quantidade": 0
                        },
                        {
                            "quantidade": 0,
                            "id": "69",
                            "img": "assets/images/produtos/dosevelhobarreiro.png",
                            "price": 3,
                            "name": "Dose Velho Barreiro"
                        },
                        {
                            "id": "676",
                            "name": "Dose Luizence",
                            "price": 6,
                            "img": "assets/images/produtos/doseluizence.png",
                            "quantidade": 0
                        }
                    ]
                },
                {
                    "id": "997",
                    "products": [
                        {
                            "id": "116",
                            "price": 19,
                            "quantidade": 0,
                            "name": "Vinho Santome",
                            "img": "assets/images/produtos/56.png"
                        },
                        {
                            "quantidade": 0,
                            "name": "Vinho Cantinho do Vale",
                            "price": 6.5,
                            "id": "486",
                            "img": "assets/images/produtos/57.png"
                        },
                        {
                            "img": "assets/images/produtos/vinhocatuaba.png",
                            "quantidade": 0,
                            "id": "919",
                            "name": "Vinho Catuaba Selvagem",
                            "price": 18
                        },
                        {
                            "price": 25,
                            "id": "569",
                            "img": "assets/images/produtos/vinhogarrafa1l.png",
                            "quantidade": 0,
                            "name": "Vinho Garrafa 1 L"
                        },
                        {
                            "quantidade": 0,
                            "name": "Vinho Draft",
                            "img": "assets/images/produtos/vinhodraft.png",
                            "id": "906",
                            "price": 15
                        }
                    ],
                    "name": "Vinhos"
                },
                {
                    "products": [
                        {
                            "name": "Energético Red Bull 250ml",
                            "id": "56",
                            "quantidade": 0,
                            "img": "assets/images/produtos/energeticoredbull.png",
                            "price": 12
                        },
                        {
                            "quantidade": 0,
                            "name": "Energético Monster 473ml",
                            "id": "778",
                            "price": 13,
                            "img": "assets/images/produtos/energeticomonster.png"
                        },
                        {
                            "name": "Energético 2L",
                            "img": "assets/images/produtos/energetico2l.png",
                            "price": 8.5,
                            "quantidade": 0,
                            "id": "222"
                        }
                    ],
                    "name": "Energéticos",
                    "id": "671"
                },
                {
                    "id": "452",
                    "name": "Refrigerantes",
                    "products": [
                        {
                            "quantidade": 0,
                            "id": "149",
                            "price": 5,
                            "img": "assets/images/produtos/cocalata.png",
                            "name": "Coca Cola Lata"
                        },
                        {
                            "name": "Guaraná Lata",
                            "price": 5,
                            "id": "255",
                            "img": "assets/images/produtos/guaranalata.png",
                            "quantidade": 0
                        },
                        {
                            "price": 5,
                            "img": "assets/images/produtos/fantallata.png",
                            "quantidade": 0,
                            "id": "534",
                            "name": "Fanta Laranja Lata"
                        },
                        {
                            "name": "Fanta Uva Lata",
                            "quantidade": 0,
                            "price": 5,
                            "id": "653",
                            "img": "assets/images/produtos/fantaulata.png"
                        },
                        {
                            "quantidade": 0,
                            "img": "assets/images/produtos/tonicalata.png",
                            "name": "Tônica Lata",
                            "price": 5,
                            "id": "285"
                        },
                        {
                            "quantidade": 0,
                            "price": 6,
                            "name": "Guaraná 1L",
                            "id": "726",
                            "img": "assets/images/produtos/guarana1l.png"
                        },
                        {
                            "id": "452",
                            "img": "assets/images/produtos/coca2l.png",
                            "price": 12,
                            "name": "Coca 2L",
                            "quantidade": 0
                        },
                        {
                            "price": 6,
                            "name": "Iti 2L",
                            "img": "assets/images/produtos/refriiti2l.png",
                            "quantidade": 0,
                            "id": "829"
                        },
                        {
                            "price": 10,
                            "name": "Fanta Laranja 2L",
                            "quantidade": 0,
                            "img": "assets/images/produtos/refrifanta2l.png",
                            "id": "71"
                        }
                    ]
                },
                {
                    "id": "132",
                    "name": "Águas",
                    "products": [
                        {
                            "quantidade": 0,
                            "img": "assets/images/produtos/aguasemgas500ml.png",
                            "name": "Água sem Gás 500ml",
                            "price": 3,
                            "id": "781"
                        },
                        {
                            "price": 6,
                            "name": "Água sem Gás 1 L",
                            "quantidade": 0,
                            "id": "669",
                            "img": "assets/images/produtos/aguasemgas1l.png"
                        },
                        {
                            "id": "444",
                            "img": "assets/images/produtos/aguacomgas500ml.png",
                            "quantidade": 0,
                            "name": "Água com Gás 500ml",
                            "price": 4
                        }
                    ]
                }
            ],
            "id": "213"
        },
        {
            "itens": [
                {
                    "name": "Porções",
                    "id": "849",
                    "products": [
                        {
                            "price": 4,
                            "img": "assets/images/produtos/porcaodeCalabresa.png",
                            "key": "",
                            "quantidade": 0,
                            "id": "178",
                            "name": "Porção Calabresa"
                        },
                        {
                            "img": "assets/images/produtos/porcaodePicanha.png",
                            "name": "Porção Picanha",
                            "key": "",
                            "id": "78",
                            "quantidade": 0,
                            "price": 3
                        },
                        {
                            "key": "",
                            "quantidade": 0,
                            "id": "840",
                            "img": "assets/images/produtos/porcaodeContraFile.png",
                            "name": "Porção Contra Filé",
                            "price": 3
                        },
                        {
                            "key": "",
                            "id": "818",
                            "quantidade": 0,
                            "price": 3,
                            "img": "assets/images/produtos/porcaodeNuggetsFrango.png",
                            "name": "Porção Nuggets Frango"
                        },
                        {
                            "price": 3,
                            "img": "assets/images/produtos/porcaodeFrangoPassarinho.png",
                            "quantidade": 0,
                            "id": "866",
                            "key": "",
                            "name": "Porção Frango a Passarinho"
                        }
                    ]
                },
                {
                    "products": [
                        {
                            "img": "assets/images/produtos/fofura.png",
                            "price": 4,
                            "id": "443",
                            "name": "Salgadinho Fofura",
                            "quantidade": 0
                        },
                        {
                            "price": 3,
                            "name": "Salgadinho Torcida",
                            "id": "965",
                            "quantidade": 0,
                            "img": "assets/images/produtos/torcida.png"
                        }
                    ],
                    "id": "586",
                    "name": "Lanches"
                },
                {
                    "id": "834",
                    "products": [
                        {
                            "quantidade": 0,
                            "img": "assets/images/produtos/fofura.png",
                            "id": "163",
                            "name": "Salgadinho Fofura",
                            "price": 4
                        },
                        {
                            "name": "Salgadinho Torcida",
                            "quantidade": 0,
                            "id": "623",
                            "img": "assets/images/produtos/torcida.png",
                            "price": 3
                        }
                    ],
                    "name": "Espetinhos"
                }
            ],
            "image2": "assets/images/convenienciawhite1.png",
            "name": "Para Comer",
            "id": "217",
            "image": "assets/images/cat4.png",
            "key": "Beber"
        }
    ]})



  setTimeout(function(){     

   msgLoadContainer.style.cssText='display:none;'
  //  alert('Cardápio atualizado com Sucesso!')
    
  }, 3000);

  


 }) //closeFormFn






 
 form.addEventListener('submit', function(e){
   e.preventDefault()  
   let idspedidosRecebidos=[]
   let pedidoAtual=[]
   let btnSubmitOrder=e.submitter

   
      if(inpuMVaue!=0){ 
        btnSubmitOrder.setAttribute("disabled", true)

            let intMesaValue=String(parseInt(inpuMVaue))
          

                databaseMesas.map((baseMap)=>{ 
                      if(baseMap.mesa==intMesaValue){ //VERIFICA EXISTENCIA  
                          baseMap.orders.map((mapOrders)=>{ 
                              recebePedidos.push(mapOrders) 
                              // console.log(mapOrders.idPedido) //id pedidos entregues

                          }) 

                      }  
                })
              
              allordersBuy.map((atualOrderMap)=>{
                recebePedidos.push(atualOrderMap)
                console.log(atualOrderMap.idPedido) //id pedido Atual
                pedidoAtual.push(atualOrderMap.idPedido) 

              })     
              
              db.collection('mesasOpen').doc(intMesaValue).set({  
                mesa:intMesaValue,
                orders:recebePedidos  //<==================Pedidos Recebidos
              })

              db.collection('notificacoes').doc(horaReplace).set({  
                mesa:intMesaValue,
                orders:allordersBuy,  //<==================Pedidos Recebidos
                "key":horaReplace,
                hora:horaAtual
              }) 
         

              setTimeout(function(){
                  // location.reload()
              
                 databaseMesas.map((baseMap)=>{ 
                 if(baseMap.mesa==intMesaValue){ //VERIFICA EXISTENCIA  
                        baseMap.orders.map((mapOrders)=>{ 
                            idspedidosRecebidos.push(mapOrders.idPedido) 
                           
                            pedidoAtual.map((mapIdAtual)=>{
                                // console.log('idAtual',mapIdAtual)
                                idspedidosRecebidos.map((recebidosMap)=>{
                                  // console.log('idAtual',recebidosMap)
                                  
                                      if(recebidosMap===mapIdAtual){
                                        entregaPed=true
                                        console.log(recebidosMap)  
                                        //  alert(recebidosMap)
                                      }else{
                                  
                                      entregaPed=false

                                      }
                                      
                                }) 

                            }) 
                              
                         

                        }) 

                    } 
  
                })


                if(entregaPed==true){
                  alert('O restaurante recebeu seu pedido, aguarde!')
                  form.reset() 
                  // location.reload()

                }else{
                  alert('Enviando novamente')
                  // form.submit()
                  btnSubmit.click();
                }
              

              }, 3000);







              
              // db.collection('notificacoes').doc(horaReplace).set({  
              //   mesa:parseInt(inpuMVaue),
              //   orders:allordersBuy,  //<==================Pedidos Recebidos
              //   hora:horaAtual
              // }) 
         
              // alert('Pedido Enviado ao Restaurante')  

     
              setTimeout(function(){
                  // location.reload()
              }, 2000);

      }else if(inpuMWhats!="") {
        
        btnSubmitOrder.setAttribute("disabled", true)
 
 
        if(databaseDeliveryArr.length>0){

          databaseDeliveryArr.map((mapDataDelivery)=>{ 
                  let validaName=mapDataDelivery.name===inputUserName.toLowerCase() 
                      
                      if(validaName==true){ 
                          mapDataDelivery.orders.map((mapOrdersDelv)=>{ 
                            recebePedidos.push(mapOrdersDelv) 
                          }) 
                      } 
 
                  })

                      allordersBuy.map((atualOrderMap)=>{
                            recebePedidos.push(atualOrderMap)
                      })

                      let userNameString=inputUserName.toLowerCase().replace(/\s/g, '+');
                          db.collection('delivery').doc(userNameString).set({  
                            "name":userNameString,
                            "whatsapp":inpuMWhats,
                            orders:recebePedidos  //<==================Pedidos Recebidos
                      }) 

                      const horaAtual=relogio()
                         
                      db.collection('notificacoes').doc(horaReplace).set({  
                            "name":userNameString,
                            "whatsapp":inpuMWhats,
                            "key":horaReplace,

                            orders:allordersBuy,  //<==================Pedidos Recebidos
                            hora:horaAtual

                      }) 
                      // allordersBuy=[]
                        
                    
                      setTimeout(function(){ 
                        databaseDeliveryArr.map((delverymap)=>{ 
                          delverymap.orders.map((mapOrdersDelivery)=>{ 
                            

                            allordersBuy.map((atuaIdOrder)=>{
                              // console.log("ID banco",mapOrdersDelivery.idPedido)

                              console.log("atualID",atuaIdOrder)

                              if(atuaIdOrder.idPedido===mapOrdersDelivery.idPedido){
                                alert('Seu pedido foi entregue ao restaurante')
                              }

                            }) 
                          })
                        })
                      }, 2000);
                   
                    

                      
                     



        }else{ 

              let userNameString=inputUserName.toLowerCase().replace(/\s/g, '+');
             
              db.collection('delivery').doc(userNameString).set({  
                "name":userNameString,
                "whatsapp":inpuMWhats,
                orders:allordersBuy  //<==================Pedidos Recebidos
              }) 

              const horaAtual=relogio()
              
              db.collection('notificacoes').doc(horaReplace).set({  
                "name":userNameString,
                "whatsapp":inpuMWhats,
                "key":horaReplace,
                orders:allordersBuy,  //<==================Pedidos Recebidos
                hora:horaAtual
              })  
            
             
              setTimeout(function(){ 
                databaseDeliveryArr.map((delverymap)=>{ 
                  delverymap.orders.map((mapOrdersDelivery)=>{ 
                    

                    allordersBuy.map((atuaIdOrder)=>{
                      console.log("ID banco",mapOrdersDelivery.idPedido)

                      console.log("atualID",atuaIdOrder)

                      if(atuaIdOrder.idPedido===mapOrdersDelivery.idPedido){
                        alert('Seu pedido foi entregue ao restaurante')
                      }

                    }) 
                  })
                })
              }, 2000);


        }
     
      }else{
        alert('Prencha todos os campos!')
      } 
 
 })
 
 
 const currencyMenu=db.collection('cardapio') 
 
 currencyMenu.onSnapshot((snapshot) => {  
  let data=[]
        snapshot.forEach((doc) => { 
          data.push(doc.data()) 
            
        }); 
        
        getApi(categoriesContainer,data,true)

    }, (error) => {
            console.log('Erro Notificações')

    });

 
 //READ MESAS
    const ordersLab=db.collection('mesasOpen') 
    ordersLab.onSnapshot((snapshot) => {  
      // let databaseMesas=[]
        snapshot.forEach((doc) => { 
          databaseMesas.push(doc.data())
 
        }); 
    }, (error) => {
            console.log('Erro Notificações')

    });

 //READ DELIVERYS 
    const ordersLabDelivery=db.collection('delivery') 
    ordersLabDelivery.onSnapshot((snapshot) => {  
        snapshot.forEach((doc) => { 
          databaseDeliveryArr.push(doc.data())
        }); 
    }, (error) => {

        console.log('Erro Notificações')
        // ...
    });

 </script>
 
    
</body>
</html>